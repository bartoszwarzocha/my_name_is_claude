@startuml
!theme materia
title Claude Code Multi-Agent Framework v2.0.0 - Workflow Orchestration & Quality Gates

skinparam activity {
    BackgroundColor #E1F5FE
    BorderColor #0277BD
    FontColor #01579B
}

skinparam rectangle {
    BackgroundColor<<Phase6>> #B39DDB
    BackgroundColor<<Phase7>> #81C784
    BackgroundColor<<QualityGate>> #FFB74D
    BackgroundColor<<Automation>> #F8BBD9
}

start

partition "ðŸ”„ Phase 6: Workflow Orchestration Enhancement" <<Phase6>> {

    :Epic Breakdown Orchestration;
    note right
        **Epic â†’ Feature â†’ Task â†’ Subtask**
        â€¢ Hierarchical decomposition automation
        â€¢ Agent coordination protocols
        â€¢ Dependency mapping & resolution
        â€¢ Real-time progress tracking

        **Automation Template:**
        `.claude/templates/todo/epic-breakdown-orchestration.md`
    end note

    fork
        :business-analyst: Epic Analysis;
        note right
            **Epic Level TODOs:**
            TodoWrite({
              todos: [{
                content: "EPIC: User Auth System",
                status: "in_progress",
                activeForm: "Analyzing auth epic"
              }]
            })
        end note

        :Cross-Agent Handoff Protocol;
        note right
            **Handoff Validation:**
            â€¢ Epic completion validation
            â€¢ Requirements transfer protocol
            â€¢ Quality gate checkpoint
            â€¢ Next phase initiation
        end note

    fork again
        :product-manager: Feature Breakdown;
        note right
            **Feature Level TODOs:**
            TodoWrite({
              todos: [{
                content: "FEATURE: OAuth2 Implementation",
                status: "in_progress",
                activeForm: "Breaking down OAuth2 feature"
              }]
            })
        end note

    fork again
        :software-architect: Task Decomposition;
        note right
            **Task Level TODOs:**
            TodoWrite({
              todos: [{
                content: "TASK: JWT Token Management",
                status: "pending",
                activeForm: "Planning JWT task"
              }]
            })
        end note
    end fork

    :Phase Transition Management;
    note right
        **Seamless Agent Handoffs:**
        â€¢ Automated handoff detection
        â€¢ Status synchronization
        â€¢ Progress validation
        â€¢ Resource coordination

        **Automation Template:**
        `.claude/templates/todo/agent-coordination-hooks.md`
    end note

    :Cross-Agent Coordination;
    note right
        **Multi-Agent Synchronization:**
        â€¢ Dependency tracking
        â€¢ Conflict resolution
        â€¢ Resource allocation
        â€¢ Real-time collaboration

        **Automation Template:**
        `.claude/templates/todo/comprehensive-todo-orchestration.md`
    end note

}

partition "âœ… Phase 7: Quality Gates & Validation" <<Phase7>> {

    :TODO-Integrated Quality Gates;
    note left
        **Quality Gate Enforcement:**
        â€¢ Phase completion validation
        â€¢ TODO-based quality checks
        â€¢ Automated compliance verification
        â€¢ Process adherence monitoring

        **Quality Gate Example:**
        TodoWrite({
          todos: [{
            content: "QUALITY GATE: Code coverage >90%",
            status: "in_progress",
            activeForm: "Validating code coverage"
          }]
        })

        **Automation Template:**
        `.claude/templates/todo/todo-integrated-quality-gates.md`
    end note

    fork
        :qa-engineer: Quality Validation;
        note right
            **QA Quality Gates:**
            â€¢ Test coverage validation
            â€¢ Performance benchmarks
            â€¢ Security scan results
            â€¢ Functionality verification
        end note

        rectangle "Quality Gate Checkpoint" as QG1 <<QualityGate>>
        note bottom of QG1
            **Automated Validation:**
            âœ… All TODOs completed
            âœ… Quality metrics passed
            âœ… Security requirements met
            âœ… Performance benchmarks achieved
        end note

    fork again
        :security-engineer: Security Validation;
        note right
            **Security Quality Gates:**
            â€¢ Vulnerability scan results
            â€¢ Compliance verification
            â€¢ Threat model validation
            â€¢ Security controls testing
        end note

        rectangle "Security Gate Checkpoint" as SG1 <<QualityGate>>
        note bottom of SG1
            **Security Validation:**
            âœ… Zero critical vulnerabilities
            âœ… Compliance requirements met
            âœ… Security controls tested
            âœ… Threat model updated
        end note

    fork again
        :reviewer: Process Validation;
        note right
            **Process Quality Gates:**
            â€¢ Documentation completeness
            â€¢ Code review completion
            â€¢ Standards compliance
            â€¢ Business requirements fulfillment
        end note

        rectangle "Process Gate Checkpoint" as PG1 <<QualityGate>>
        note bottom of PG1
            **Process Validation:**
            âœ… Documentation complete
            âœ… Code reviews passed
            âœ… Standards compliant
            âœ… Requirements satisfied
        end note
    end fork

    :Cross-Agent TODO Validation;
    note left
        **Multi-Agent Quality Coordination:**
        â€¢ Cross-agent dependency validation
        â€¢ Quality metric aggregation
        â€¢ Process compliance verification
        â€¢ Final approval coordination

        **Validation Example:**
        TodoWrite({
          todos: [{
            content: "CROSS-VALIDATION: All agents approve deployment",
            status: "in_progress",
            activeForm: "Coordinating cross-agent approval"
          }]
        })

        **Automation Template:**
        `.claude/templates/todo/cross-agent-todo-validation.md`
    end note

    :Quality Metrics & Monitoring;
    note right
        **Continuous Quality Tracking:**
        â€¢ Real-time quality metrics
        â€¢ Process improvement analytics
        â€¢ Compliance monitoring
        â€¢ Performance trending
    end note

}

partition "ðŸš€ Production Automation Templates" <<Automation>> {

    :Hierarchical TODO Automation;
    note right
        **Template: `todo-mapping-script.md`**
        â€¢ Complete Epicâ†’Featureâ†’Taskâ†’Subtask algorithms
        â€¢ Concrete TodoWrite commands
        â€¢ Agent coordination logic
        â€¢ Progress tracking automation
    end note

    :Agent Coordination Hooks;
    note right
        **Template: `agent-coordination-hooks.md`**
        â€¢ Automated handoff scripts
        â€¢ Cross-agent dependency tracking
        â€¢ Real-time progress monitoring
        â€¢ Conflict resolution protocols
    end note

    :Configuration Validation;
    note right
        **Template: `claude-md-validation.md`**
        â€¢ CLAUDE.md Section 8 validation
        â€¢ Auto-fix capabilities
        â€¢ Production readiness scoring
        â€¢ Configuration optimization
    end note

    :Working Examples;
    note right
        **Template: `working-examples-todo.md`**
        â€¢ Real-world TodoWrite examples
        â€¢ Copy-paste ready code
        â€¢ Complete workflow demonstrations
        â€¢ Best practices implementation
    end note

}

:Workflow Orchestration Complete;
note right
    **Version 2.0.0 Achievements:**
    âœ… Complete 7-phase lifecycle
    âœ… Hierarchical TODO management
    âœ… Cross-agent coordination
    âœ… Quality gates integration
    âœ… Production automation
    âœ… Real-time monitoring
end note

if (Quality Gates Passed?) then (no)
    :Address Quality Issues;
    note right
        **Quality Remediation:**
        â€¢ Update relevant TODOs
        â€¢ Coordinate fixes across agents
        â€¢ Re-validate quality gates
        â€¢ Ensure compliance
    end note

    :Re-run Quality Validation;
else (yes)
    :Production Deployment Approved;
    note right
        **Deployment Ready:**
        â€¢ All quality gates passed
        â€¢ Cross-agent validation complete
        â€¢ TODO tracking verified
        â€¢ Automation templates validated
    end note
endif

stop

note bottom
    **Key Innovation: TODO-Integrated Quality Gates**
    Every quality checkpoint is tied to TODO completion,
    ensuring complete traceability and accountability
    throughout the development lifecycle.
end note

@enduml