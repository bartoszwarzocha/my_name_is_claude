@startuml
!theme materia
title Claude Code Multi-Agent Framework - Simplified TodoWrite Workflow

skinparam activity {
    BackgroundColor #E1F5FE
    BorderColor #0277BD
    FontColor #01579B
}

start

:Feature Request / Task Initiated;

partition "üìù TodoWrite Session Management" {
    :Create Initial TodoWrite Tasks;
    note right
        TodoWrite({
          todos: [{
            content: "Analyze requirements and plan approach",
            status: "in_progress",
            activeForm: "Analyzing requirements"
          }]
        })
    end note

    :Select Appropriate Agent;
    note right
        ‚Ä¢ business-analyst - Requirements analysis
        ‚Ä¢ product-manager - Feature planning
        ‚Ä¢ software-architect - System design
        ‚Ä¢ frontend-engineer - UI development
        ‚Ä¢ api-engineer - Backend services
        ‚Ä¢ data-engineer - Data solutions
        ‚Ä¢ security-engineer - Security implementation
        ‚Ä¢ qa-engineer - Quality assurance
        ‚Ä¢ deployment-engineer - Infrastructure
        ‚Ä¢ ux-designer - User experience
        ‚Ä¢ reviewer - Quality validation
    end note
}

partition "üîÑ Agent Work Execution" {
    :Mark Task as In-Progress;
    note right
        TodoWrite({
          todos: [{
            content: "Current task description",
            status: "in_progress",
            activeForm: "Working on current task"
          }]
        })
    end note

    :Execute Agent Work;
    note right
        ‚Ä¢ Follow agent-specific prompts
        ‚Ä¢ Apply functional approach patterns
        ‚Ä¢ Use CLAUDE.md configuration
        ‚Ä¢ Maintain quality standards
    end note

    :Complete Task Immediately;
    note right
        TodoWrite({
          todos: [{
            content: "Current task description",
            status: "completed",
            activeForm: "Working on current task"
          }]
        })
    end note
}

partition "ü§ù Agent Coordination" {
    if (Need Agent Handoff?) then (yes)
        :Use Simplified Handoff Hook;
        note right
            ./.claude/hooks/agent-handoff.sh "from-agent" "to-agent"

            Generates TodoWrite patterns:
            TodoWrite({
              content: "Process handoff from from-agent",
              status: "in_progress",
              activeForm: "Processing from-agent handoff"
            })
        end note

        :Next Agent Takes Over;
    else (no)
    endif

    if (Quality Check Needed?) then (yes)
        :Run Quality Gate Hook;
        note right
            ./.claude/hooks/quality-gate-checker.sh "agent-type" "task-type"

            Basic validation for agent-specific work
        end note
    else (no)
    endif
}

partition "‚úÖ Session Completion" {
    :All TodoWrite Tasks Completed;
    note right
        ‚Ä¢ All tasks marked as "completed"
        ‚Ä¢ No tasks remain "in_progress"
        ‚Ä¢ Work ready for next phase or completion
    end note

    :Session Summary;
    note right
        ‚Ä¢ Document what was accomplished
        ‚Ä¢ Note any follow-up tasks needed
        ‚Ä¢ Prepare for next session or handoff
    end note
}

stop

note bottom
    **Simplified TodoWrite Principles:**
    ‚Ä¢ ONE task "in_progress" at a time
    ‚Ä¢ Complete tasks immediately after finishing
    ‚Ä¢ Use descriptive content & activeForm
    ‚Ä¢ Coordinate through simple hooks
    ‚Ä¢ Focus on essential functionality
end note

@enduml